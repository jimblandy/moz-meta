#!/usr/bin/env bash

used="
BUILD_STATIC_LIBS
ENABLE_TESTS
JS_STATIC_BUILD
MOZ_DBGRINFO_MODULES
MOZ_JAVAXPCOM
MOZ_JSLOADER
MOZ_MOCHITEST
XPC_IDISPATCH_SUPPORT
CPP_THROW_NEW
"

unused="
ACCESSIBILITY
MOZ_ACTIVEX_SCRIPTING_SUPPORT
MOZ_AUTH_EXTENSION
MOZ_BRANDING_DIRECTORY
MOZ_BUILD_APP
MOZ_CALENDAR
MOZ_COMPOSER
MOZ_EMBEDDING_LEVEL_BASIC
MOZ_EMBEDDING_LEVEL_DEFAULT
MOZ_EMBEDDING_LEVEL_MINIMAL
MOZ_EMBEDDING_PROFILE
MOZ_ENABLE_CANVAS
MOZ_ENABLE_POSTSCRIPT
MOZ_EXTENSIONS_ALL
MOZ_EXTENSIONS_DEFAULT
MOZ_FEEDS
MOZ_IMG_DECODERS_DEFAULT
MOZ_IMG_ENCODERS
MOZ_IMG_ENCODERS_DEFAULT
MOZ_INSTALLER
MOZ_IPCD
MOZ_JSDEBUGGER
MOZ_LDAP_XPCOM
MOZ_LIBART_CFLAGS
MOZ_LIBART_LIBS
MOZ_MAIL_NEWS
MOZ_MATHML
MOZ_MORK
MOZ_MORKREADER
MOZ_NO_ACTIVEX_SUPPORT
MOZ_NO_FAST_LOAD
MOZ_NO_INSPECTOR_APIS
MOZ_NO_XPCOM_OBSOLETE
MOZ_OJI
MOZ_PERMISSIONS
MOZ_PLACES
MOZ_PLAINTEXT_EDITOR_ONLY
MOZ_PLUGINS
MOZ_PREF_EXTENSIONS
MOZ_PROFILELOCKING
MOZ_PROFILESHARING
MOZ_PSM
MOZ_PYTHON
MOZ_PYTHON_DEBUG_SUFFIX
MOZ_PYTHON_DLL_SUFFIX
MOZ_PYTHON_EXTENSIONS
MOZ_PYTHON_INCLUDES
MOZ_PYTHON_LIBS
MOZ_PYTHON_PREFIX
MOZ_PYTHON_VER
MOZ_PYTHON_VER_DOTTED
MOZ_RDF
MOZ_REFLOW_PERF
MOZ_SAFE_BROWSING
MOZ_SPELLCHECK
MOZ_STATIC_MAIL_BUILD
MOZ_STORAGE
MOZ_SVG
MOZ_TIMELINE
MOZ_UI_LOCALE
MOZ_UNIVERSALCHARDET
MOZ_UPDATER
MOZ_URL_CLASSIFIER
MOZ_USE_NATIVE_UCONV
MOZ_V1_STRING_ABI
MOZ_VIEW_SOURCE
MOZ_XPFE_COMPONENTS
MOZ_XPINSTALL
MOZ_XSLT_STANDALONE
MOZ_XTF
MOZ_XUL
MOZ_XUL_APP
MOZ_ZIPWRITER
NECKO_COOKIES
NECKO_DISK_CACHE
NECKO_PROTOCOLS_DEFAULT
NECKO_SMALL_BUFFERS
NS_DISABLE_LOGGING
NS_PRINTING
SUNCTL
XULRUNNER_STUB_NAME

MOZILLA_VERSION
MOZILLA_LOCALE_VERSION
MOZILLA_REGION_VERSION
MOZILLA_SKIN_VERSION

HAVE_CPP_2BYTE_WCHAR_T
HAVE_CPP_ACCESS_CHANGING_USING
HAVE_CPP_AMBIGUITY_RESOLVING_USING
HAVE_CPP_BOOL
HAVE_CPP_DYNAMIC_CAST_TO_VOID_PTR
HAVE_CPP_EXPLICIT
HAVE_CPP_MODERN_SPECIALIZE_TEMPLATE_SYNTAX
HAVE_CPP_NAMESPACE_STD
HAVE_CPP_NEW_CASTS
HAVE_CPP_PARTIAL_SPECIALIZATION
HAVE_CPP_TROUBLE_COMPARING_TO_ZERO
HAVE_CPP_TYPENAME
HAVE_CPP_UNAMBIGUOUS_STD_NOTEQUAL
HAVE_STATVFS
NEED_CPP_UNUSED_IMPLEMENTATIONS
NEW_H
HAVE_GETPAGESIZE
HAVE_ICONV
HAVE_ICONV_WITH_CONST_INPUT
HAVE_MBRTOWC
HAVE_SYS_MOUNT_H
HAVE_SYS_VFS_H
HAVE_WCRTOMB
MOZ_V1_STRING_ABI

MOZ_BUILD_APP
MOZ_XUL_APP
MOZ_SUITE
MOZ_PHOENIX
MOZ_THUNDERBIRD
MOZ_STANDALONE_COMPOSER
MOZ_SUNBIRD
MOZ_XULRUNNER
MOZ_BUILD_APP
MOZ_XUL_APP

NSS_CFLAGS
NSS_LIBS
NSS_DEP_LIBS
MOZ_NATIVE_NSS
"

words="
ACCESSIBILITY
ATK_MAJOR_VERSION
ATK_MINOR_VERSION
ATK_REV_VERSION
D_INO
FUNCPROTO
HAVE_CURL_CURL_H
HAVE_DIRENT_H
HAVE_DLADDR
HAVE_FCHMOD
HAVE_FLOCKFILE
HAVE_FT_BITMAP_SIZE_Y_PPEM
HAVE_FT_GLYPHSLOT_EMBOLDEN
HAVE_FT_LOAD_SFNT_TABLE
HAVE_FT_SELECT_SIZE
HAVE_GETOPT_H
HAVE_GNU_GET_LIBC_VERSION
HAVE_GNU_LIBC_VERSION_H
HAVE_I18N_LC_MESSAGES
HAVE_INT16_T
HAVE_INT32_T
HAVE_INT64_T
HAVE_INTTYPES_H
HAVE_LANGINFO_CODESET
HAVE_LCHOWN
HAVE_LIBDL
HAVE_LIBM
HAVE_LOCALTIME_R
HAVE_LSTAT64
HAVE_MALLOC_H
HAVE_MEMMOVE
HAVE_MEMORY_H
HAVE_NL_TYPES_H
HAVE_RANDOM
HAVE_RES_NINIT
HAVE_RINT
HAVE_SIGINFO_T
HAVE_SNPRINTF
HAVE_STAT64
HAVE_STDINT_H
HAVE_STRERROR
HAVE_STRTOK_R
HAVE_ST_BLKSIZE
HAVE_SYS_BITYPES_H
HAVE_SYS_CDEFS_H
HAVE_SYS_STATFS_H
HAVE_SYS_STATVFS_H
HAVE_TRUNCATE64
HAVE_UINT
HAVE_UINT64_T
HAVE_UNAME_DOMAINNAME_FIELD
HAVE_UNISTD_H
HAVE_VA_COPY
HAVE_VISIBILITY_ATTRIBUTE
HAVE_VISIBILITY_HIDDEN_ATTRIBUTE
HAVE_X11_XKBLIB_H
HAVE_XSHM
HAVE__UNWIND_BACKTRACE
HAVE___CXA_DEMANGLE
IBMBIDI
JS_THREADSAFE
MMGC_THREADSAFE
MOZILLA_LOCALE_VERSION
MOZILLA_REGION_VERSION
MOZILLA_SKIN_VERSION
MOZILLA_VERSION
MOZILLA_VERSION_U
MOZ_ACCESSIBILITY_ATK
MOZ_BUILD_APP
MOZ_CRASHREPORTER
MOZ_DEFAULT_TOOLKIT
MOZ_DEMANGLE_SYMBOLS
MOZ_DISTRIBUTION_ID
MOZ_DLL_SUFFIX
MOZ_EMBEDDING_LEVEL_BASIC
MOZ_EMBEDDING_LEVEL_DEFAULT
MOZ_EMBEDDING_LEVEL_MINIMAL
MOZ_ENABLE_CANVAS
MOZ_ENABLE_DBUS
MOZ_ENABLE_GNOMEUI
MOZ_ENABLE_OLD_ABI_COMPAT_WRAPPERS
MOZ_ENABLE_XREMOTE
MOZ_FEEDS
MOZ_JSLOADER
MOZ_LOGGING
MOZ_MATHML
MOZ_MEMORY
MOZ_MEMORY_DEBUG
MOZ_MEMORY_LINUX
MOZ_MEMORY_SIZEOF_PTR_2POW
MOZ_MORKREADER
MOZ_NO_XPCOM_OBSOLETE
MOZ_PHOENIX
MOZ_PLACES
MOZ_PROFILELOCKING
MOZ_RDF
MOZ_REFLOW_PERF
MOZ_REFLOW_PERF_DSP
MOZ_SAFE_BROWSING
MOZ_STORAGE
MOZ_SVG
MOZ_SVG_FOREIGNOBJECT
MOZ_TREE_CAIRO
MOZ_UPDATE_CHANNEL
MOZ_URL_CLASSIFIER
MOZ_USER_DIR
MOZ_VIEW_SOURCE
MOZ_WIDGET_GTK2
MOZ_X11
MOZ_XPINSTALL
MOZ_XTF
MOZ_XUL
MOZ_XUL_APP
NEED_MMGC_CONFIG_H
NS_PRINTING
NS_PRINT_PREVIEW
SIZEOF_INT_P
STDC_HEADERS
UNIX_ASYNC_DNS
VA_COPY
XP_UNIX
_REENTRANT
"

for w in $words; do
    find . -name autom4te.cache -prune -false -o \
           -type f \
           ! -name foo ! -name configure.in ! -name configure \
           ! -name autoconf.mk.in \
           ! -name '*~' \
    | xargs grep -n --fixed-strings "$w"
done
